<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>G Entreprises</title>
            </f:facet>
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    <p:panelGrid columns="2">
                        SUNU <br></br>ENTREPRISE
                        <p:clock autoSync="true"/>
                    </p:panelGrid>
                </p:layoutUnit>

                <p:layoutUnit position="south"  size="45" style="text-align: center" closable="true" collapsible="true">
                    <p:outputLabel value="Projet JEE" /> 
                    <p:outputLabel value=" : MadeBYBSS"/>
                </p:layoutUnit>

                <p:layoutUnit position="west" size="240" header="Menu" collapsible="true">
                    <p:menu>
                        <p:submenu label="Acceuil">
                                 <p:menuitem value="Acceuil"  outcome="Admin"/>
                                  <p:menuitem value="Deconnexion"  outcome="Connexion"/>
                        </p:submenu>

                    </p:menu>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                      <p:fieldset legend="Administrer vos Clients">
                     <p:dialog id="userDetail1" widgetVar="$userDetail1" header="Ajouter Client" hideEffect="explode" appendTo="@(body)" resizable="false" draggable="false" closeOnEscape="true">  
        <h:form>  
            <p:panelGrid columns="2">  
             <h:outputLabel for="id" value="Identifiant: *" />  
                <p:inputText id="id" value="#{personneBean.nouvellepersonne.id}" label="User Name" placeholder="Entrer vore identifiant" />  
                <h:outputLabel for="pr" value="User Name: *" />  
                <p:inputText id="pr" value="#{personneBean.nouvellepersonne.prenom}" label="User Name" placeholder="Entrer vore prenom" />  
                <h:outputLabel for="pr1" value="User Name: *" />  
                <p:inputText id="pr1" value="#{personneBean.nouvellepersonne.nom}" label="User Name" placeholder="Entrer vore nom" />  
                <p:outputLabel for="email" value="Login" />  
                <p:inputTextarea id="email" label="login" value="#{personneBean.nouvellepersonne.login}" placeholder="Enter votre e-mail" /> 
                  <p:outputLabel for="tel" value="Telephone" />  
                <p:inputText id="tel" label="telephone" value="#{personneBean.nouvellepersonne.telephone}" placeholder="Enter votre telephone" />  
                   <p:outputLabel for="cin" value="CIN" />  
                <p:inputText id="cin" label="login" value="#{personneBean.nouvellepersonne.cin}" placeholder="Enter votre CIN" />  
                 <p:outputLabel for="role" value="Role" />  
                <p:inputText id="role" label="Role" value="#{personneBean.nouvellepersonne.role}" placeholder="Enter votre Role"/>  
                 <p:commandButton value="add" process="@form" id="AddButtonId" ajax="true" icon="ui-icon-plus" update=":form1:userTable" actionListener="#{personneBean.insererUtilisateur()}" oncomplete="PF('$userDetail1').hide()" />  
                <p:commandButton id="cancelAddButtonId" value="Cancel" onclick="handleComplete(xhr, status, args)" />  
            </p:panelGrid>  
        </h:form>  
    </p:dialog>  
    <h:outputScript>  
    </h:outputScript>  
    <p:dialog id="userDetail2" widgetVar="$userDetail2" header="Update personne" hideEffect="explode" appendTo="@(body)" resizable="false" draggable="false" closeOnEscape="true">  
        <h:form>  
            <h:inputText value="#{personneBean.utilisateur.id}" />  
            <p:panelGrid columns="2">  
                <h:outputLabel for="pr" value="Prenom *" />  
                <p:inputText id="pr" value="#{personneBean.utilisateur.prenom}" label="prenom" placeholder="Entrer votre prenom" />  
                <h:outputLabel for="nm" value="User Name: *" />  
                <p:inputText id="nm" value="#{personneBean.utilisateur.nom}" label="User Name" placeholder="Enter votre nom" />  
  
                <p:outputLabel for="Em" value="Login" />  
                <p:inputText id="Em" label="Login" value="#{personneBean.utilisateur.login}" placeholder="Enter votre Email" />  
                 <p:outputLabel for="tel" value="Telephone" />  
                 <p:inputText id="tel" label="Telephone" value="#{personneBean.utilisateur.telephone}" placeholder="Enter votre telephone" />  
                  <p:outputLabel for="cin" value="CIN" />  
                <p:inputTextarea id="cin" label="CIN" value="#{personneBean.utilisateur.cin}" placeholder="Enter votre CIN" /> 
                <p:outputLabel for="rl" value="Role" />  
                <p:inputTextarea id="rl" label="Role" value="#{personneBean.utilisateur.role}" placeholder="Enter votre Role" />  
  
                <p:commandButton value="Update" ajax="true" icon="ui-icon-disk" update=":form1:userTable" actionListener="#{personneBean.modifierUtilisateur()}" oncomplete="handleComplete(xhr, status, args)" />
                <p:commandButton value="Cancel" id="cancelButtonId" onclick="handleComplete(xhr, status, args)" />  
            </p:panelGrid>  
        </h:form>  
    </p:dialog>  
    <h:outputScript id="handleCompleteScript" target="body">  
    </h:outputScript>  
    <h:form id="form1"> 
        <p:commandButton icon="ui-icon-plusthick" id="addUserBtn" value="Add User"  update=":userDetail1" ajax="true" oncomplete="PF('$userDetail1').show()" />  
        <p:dataTable value="#{personneBean.personnes}" var="personne" paginator="true" rows="5" id="userTable">  
            <p:column headerText="Prenom" style="text-align: left;">  
                <h:outputText value="#{personne.prenom}" />  
            </p:column>  
            <p:column headerText="Nom"   >  
                  <h:outputText value="#{personne.nom}" />  
            </p:column>  
           <p:column headerText="Telephone">  
                <h:outputText value="#{personne.telephone}" />  
            </p:column>  
            <p:column headerText="Login">  
                <h:outputText value="#{personne.login}" />  
            </p:column> 
            <p:column headerText="CIN">  
                <h:outputText value="#{personne.cin}" />  
            </p:column>  
            <p:column headerText="Role">  
                <h:outputText value="#{personne.role}" />  
            </p:column>   
            <p:column headerText="Edit" style="text-align: center">  
                <p:commandButton icon="ui-icon-pencil" id="editUserBtn" value="Edit" ajax="true" actionListener="#{personneBean.changePersonne(personne)}" update=":userDetail2" oncomplete="PF('$userDetail2').show()" />  
  
            </p:column>  
  
            <p:column headerText="Delete" style="text-align: center">  
  
                <p:commandButton value="Delete" icon="ui-icon-trash" type="button" onclick="PF('confirmDialog').show()" />  
                <p:confirmDialog message="Are you sure you want to delete this record?Record once deleted can not be retrieved." header="Deleting" severity="alert" widgetVar="confirmDialog">  
                    <p:commandButton value="Yes Sure" update=":form1:userTable" action="#{personneBean.supprimerUtilisateur()}" oncomplete="PF('confirmDialog').hide()" />  
  
                    <p:commandButton value="Not Yet" onclick="PF('confirmDialog').hide();" type="button" />  
                </p:confirmDialog>   
            </p:column>  
              <p:column headerText="Valider" style="text-align: center"> 
               <p:commandButton value="Valider" icon="ui-icon-trash" type="button" onclick="PF('confirmDialogv').show()" /> 
               <p:confirmDialog message=" Etes vous sure de bien vouloir valider son inscription?Une fois valider il est impossible de revenir en arriere ." header="Deleting" severity="alert" widgetVar="confirmDialogv">  
                    <p:commandButton value="Yes Sure" update=":form1:userTable" action="#{personneBean.validerUtilisateur(personne)}" oncomplete="PF('confirmDialogv').hide()" />  
                    <p:commandButton value="Not Yet" onclick="PF('confirmDialogv').hide();" type="button" />  
                </p:confirmDialog>  
                </p:column>  
            <p:rowExpansion>  
                <h:outputText value="#{personne.login}" styleClass="rowExpansion" />  
            </p:rowExpansion>  
        </p:dataTable>  
    </h:form>  
          </p:fieldset>
                </p:layoutUnit>
            </p:layout>
        </h:body>
    </f:view>
</html>